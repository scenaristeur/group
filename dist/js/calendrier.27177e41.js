(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["calendrier"],{4585:function(e,t,a){"use strict";a("b0c0"),a("ac1f"),a("8a79"),a("5319"),a("96cf");var r=a("1da1"),n=a("4d8d"),s=a("6dc1"),o=a("00e8"),i=a.n(o),c=a("7fed"),d=a.n(c),u=window.solid,l=new d.a(i.a);t["a"]={methods:{createGroup:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var r,o,i,c,d,u,p,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("todo formate a good url without single quotes..."),e.encoded_name=e.name.replace(/\s/g,"_").replace(/'/g,"_").replace(/"/g,"_"),e.path=e.path.endsWith("/")?e.path:e.path+"/",r=new Date,o=r.toISOString(),e.url=e.path+e.encoded_name+".ttl",e.identifier="we",e.maker=t.webId,e.inbox="./"+e.encoded_name+"/inbox/",e.storage="./"+e.encoded_name+"/",a.next=12,Object(n["a"])(e.url);case 12:return i=a.sent,c=i.addSubject({identifier:e.identifier}),c.addLiteral(s["g"].fn,e.name),c.addRef(s["c"].inbox,e.inbox),c.addRef(s["f"].storage,e.storage),c.addLiteral(s["a"].created,o),c.addRef(s["b"].maker,e.maker),c.addRef(s["g"].hasMember,e.maker),c.addRef(s["d"].type,s["g"].Group),void 0!=e.purpose&&c.addLiteral("http://www.w3.org/ns/org#purpose",e.purpose),void 0!=e.super&&c.addRef("http://www.w3.org/ns/org#subOrganizationOf",e.super),console.log("GROUP",e),a.prev=24,a.next=27,i.save();case 27:return e.creation={status:"ok",message:"group created"},a.next=30,l.createFolder(e.path+e.encoded_name+"/inbox/Invitations/");case 30:return a.next=32,l.createFolder(e.path+e.encoded_name+"/inbox/Requetes/");case 32:return a.next=34,l.createFolder(e.path+e.encoded_name+"/inbox/Traites/");case 34:return a.next=36,l.createFolder(e.path+e.encoded_name+"/inbox/Corbeille/");case 36:console.log("ok"),a.next=44;break;case 39:a.prev=39,a.t0=a["catch"](24),console.log(a.t0),alert(a.t0),e.creation={status:"error",message:a.t0};case 44:return a.next=46,Object(n["c"])(e.maker);case 46:return d=a.sent,u=d.getSubject(e.maker),u.addRef("http://www.w3.org/ns/org#memberOf",e.url+"#"+e.identifier),a.prev=49,a.next=52,d.save();case 52:a.next=58;break;case 54:a.prev=54,a.t1=a["catch"](49),alert(a.t1),console.log(a.t1);case 58:if(void 0==e.super){a.next=73;break}return a.next=61,Object(n["c"])(e.super);case 61:return p=a.sent,f=p.getSubject(e.super),f.addRef("http://www.w3.org/ns/org#hasSubOrganization",e.url+"#"+e.identifier),a.prev=64,a.next=67,p.save();case 67:a.next=73;break;case 69:a.prev=69,a.t2=a["catch"](64),alert(a.t2),console.log(a.t2);case 73:return a.abrupt("return",e);case 74:case"end":return a.stop()}}),a,null,[[24,39],[49,54],[64,69]])})))()},getGroupStorage:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.data[e]["http://www.w3.org/ns/pim/space#storage"];case 2:return a=t.sent,r={folders:[],files:[]},t.next=6,l.itemExists("".concat(a));case 6:if(!t.sent){t.next=12;break}return t.next=9,l.readFolder("".concat(a));case 9:r=t.sent,t.next=14;break;case 12:return t.next=14,l.createFolder("".concat(a));case 14:return t.abrupt("return",r);case 15:case"end":return t.stop()}}),t)})))()}}}},"5fb1":function(e,t,a){"use strict";a("7e6e")},"7e6e":function(e,t,a){},be00:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"dayspan"}},[a("ds-calendar-app",{ref:"app",attrs:{calendar:e.calendar,"read-only":e.readOnly},on:{change:e.saveState},scopedSlots:e._u([{key:"eventPopover",fn:function(t){return[a("ds-calendar-event-popover",e._b({attrs:{"read-only":e.readOnly},on:{finish:e.saveState}},"ds-calendar-event-popover",t,!1))]}},{key:"eventCreatePopover",fn:function(t){var r=t.placeholder,n=t.calendar;return[a("ds-calendar-event-create-popover",{attrs:{"calendar-event":r,calendar:n,close:e.$refs.app.$refs.calendar.clearPlaceholder},on:{"create-edit":e.$refs.app.editPlaceholder,"create-popover-closed":e.saveState}})]}},{key:"eventTimeTitle",fn:function(t){var r=t.calendarEvent,n=t.details;return[a("div",[n.icon?a("v-icon",{staticClass:"ds-ev-icon",style:{color:n.forecolor},attrs:{size:"14"}},[e._v(" "+e._s(n.icon)+" ")]):e._e(),a("strong",{staticClass:"ds-ev-title"},[e._v(e._s(n.title))])],1),a("div",{staticClass:"ds-ev-description"},[e._v(e._s(e.getCalendarTime(r)))])]}}])},[a("template",{slot:"title"},[e._v(" DaySpan ")]),a("template",{slot:"menuRight"},[a("v-btn",{attrs:{icon:"",large:"",href:"https://github.com/ahmadissa/dayspan-vuetify-2",target:"_blank"}},[a("v-avatar",{attrs:{size:"32px",tile:""}},[a("img",{attrs:{src:"https://simpleicons.org/icons/github.svg",alt:"Github"}})])],1)],1),a("template",{slot:"drawerBottom"},[a("div",{staticClass:"pa-3"},[a("v-checkbox",{attrs:{label:"Read Only?"},model:{value:e.readOnly,callback:function(t){e.readOnly=t},expression:"readOnly"}})],1)])],2)],1)},n=[],s=(a("4160"),a("159b"),a("96cf"),a("1da1")),o=a("4585"),i=a("00e8"),c=a.n(i),d=a("7fed"),u=a.n(d),l=a("9abd"),p=a("2b0e"),f=new u.a(c.a),v={name:"app",mixins:[o["a"]],created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:void 0!=e.$route.query.url&&(e.url=void 0!=e.$route.hash?e.$route.query.url+e.$route.hash:e.$route.query,e.update());case 1:case"end":return t.stop()}}),t)})))()},data:function(){return{storeKey:"dayspanState",calendar:l["a"].months(),readOnly:!1}},mounted:function(){window.app=this.$refs.app},methods:{update:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getGroupStorage(e.url);case 2:e.st=t.sent,void 0!=e.st&&e.loadState();case 4:case"end":return t.stop()}}),t)})))()},getCalendarTime:function(e){var t=e.start.format("a"),a=e.end.format("a"),r=e.start.format("h"),n=e.end.format("h");return 0!==e.start.minute&&(r+=e.start.format(":mm")),0!==e.end.minute&&(n+=e.end.format(":mm")),t===a?r+" - "+n+a:r+t+" - "+n+a},saveState:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.calendar.toInput(!0),r=JSON.stringify(a),void 0==e.st){t.next=11;break}return t.prev=3,t.next=6,f.createFile(e.st.url+"calendrier.json",r,"text/x-json");case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](3),alert("Désolé, Impossible d'enregitrer le calendrier à l'adresse "+e.st);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})))()},loadState:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},t.prev=1,t.next=4,f.readFile(e.st.url+"calendrier.json");case 4:r=t.sent,n=JSON.parse(r),n&&(a=n,a.preferToday=!1),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:a.events.forEach((function(t){var a=e.$dayspan.getDefaultEventDetails();t.data=p["default"].util.extend(a,t.data)})),e.$refs.app.setState(a);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})))()}}},h=v,m=(a("5fb1"),a("2877")),g=a("6544"),b=a.n(g),w=a("5530"),x=(a("df86"),a("7560")),y=a("58df"),k=Object(y["a"])(x["a"]).extend({name:"v-app",props:{dark:{type:Boolean,default:void 0},id:{type:String,default:"app"},light:{type:Boolean,default:void 0}},computed:{isDark:function(){return this.$vuetify.theme.dark}},beforeCreate:function(){if(!this.$vuetify||this.$vuetify===this.$root)throw new Error("Vuetify is not properly initialized, see https://vuetifyjs.com/getting-started/quick-start#bootstrapping-the-vuetify-object")},render:function(e){var t=e("div",{staticClass:"v-application--wrap"},this.$slots.default);return e("div",{staticClass:"v-application",class:Object(w["a"])({"v-application--is-rtl":this.$vuetify.rtl,"v-application--is-ltr":!this.$vuetify.rtl},this.themeClasses),attrs:{"data-app":!0},domProps:{id:this.id}},[t])}}),O=a("8212"),R=a("8336"),_=a("ac7c"),S=a("132d"),j=Object(m["a"])(h,r,n,!1,null,null,null);t["default"]=j.exports;b()(j,{VApp:k,VAvatar:O["a"],VBtn:R["a"],VCheckbox:_["a"],VIcon:S["a"]})},df86:function(e,t,a){}}]);
//# sourceMappingURL=calendrier.27177e41.js.map