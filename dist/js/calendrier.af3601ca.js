(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["calendrier"],{4585:function(e,t,r){"use strict";r("b0c0"),r("ac1f"),r("8a79"),r("5319"),r("96cf");var a=r("1da1"),n=r("4d8d"),s=r("6dc1"),o=r("00e8"),c=r.n(o),i=r("7fed"),d=r.n(i),u=window.solid,l=new d.a(c.a);t["a"]={methods:{createGroup:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a,o,c,i,d,u,p,f;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("todo formate a good url without single quotes..."),e.encoded_name=e.name.replace(/\s/g,"_").replace(/'/g,"_").replace(/"/g,"_"),e.path=e.path.endsWith("/")?e.path:e.path+"/",a=new Date,o=a.toISOString(),e.url=e.path+e.encoded_name+".ttl",e.identifier="we",e.maker=t.webId,e.inbox="./"+e.encoded_name+"/inbox/",e.storage="./"+e.encoded_name+"/",r.next=12,Object(n["a"])(e.url);case 12:return c=r.sent,i=c.addSubject({identifier:e.identifier}),i.addLiteral(s["g"].fn,e.name),i.addRef(s["c"].inbox,e.inbox),i.addRef(s["f"].storage,e.storage),i.addLiteral(s["a"].created,o),i.addRef(s["b"].maker,e.maker),i.addRef(s["g"].hasMember,e.maker),i.addRef(s["d"].type,s["g"].Group),void 0!=e.purpose&&i.addLiteral("http://www.w3.org/ns/org#purpose",e.purpose),void 0!=e.super&&i.addRef("http://www.w3.org/ns/org#subOrganizationOf",e.super),console.log("GROUP",e),r.prev=24,r.next=27,c.save();case 27:return e.creation={status:"ok",message:"group created"},r.next=30,l.createFolder(e.path+e.encoded_name+"/inbox/Invitations/");case 30:return r.next=32,l.createFolder(e.path+e.encoded_name+"/inbox/Requetes/");case 32:return r.next=34,l.createFolder(e.path+e.encoded_name+"/inbox/Traites/");case 34:return r.next=36,l.createFolder(e.path+e.encoded_name+"/inbox/Corbeille/");case 36:console.log("ok"),r.next=44;break;case 39:r.prev=39,r.t0=r["catch"](24),console.log(r.t0),alert(r.t0),e.creation={status:"error",message:r.t0};case 44:return r.next=46,Object(n["c"])(e.maker);case 46:return d=r.sent,u=d.getSubject(e.maker),u.addRef("http://www.w3.org/ns/org#memberOf",e.url+"#"+e.identifier),r.prev=49,r.next=52,d.save();case 52:r.next=58;break;case 54:r.prev=54,r.t1=r["catch"](49),alert(r.t1),console.log(r.t1);case 58:if(void 0==e.super){r.next=73;break}return r.next=61,Object(n["c"])(e.super);case 61:return p=r.sent,f=p.getSubject(e.super),f.addRef("http://www.w3.org/ns/org#hasSubOrganization",e.url+"#"+e.identifier),r.prev=64,r.next=67,p.save();case 67:r.next=73;break;case 69:r.prev=69,r.t2=r["catch"](64),alert(r.t2),console.log(r.t2);case 73:return r.abrupt("return",e);case 74:case"end":return r.stop()}}),r,null,[[24,39],[49,54],[64,69]])})))()},getGroupStorage:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.data[e]["http://www.w3.org/ns/pim/space#storage"];case 2:return r=t.sent,a={folders:[],files:[]},t.next=6,l.itemExists("".concat(r));case 6:if(!t.sent){t.next=12;break}return t.next=9,l.readFolder("".concat(r));case 9:a=t.sent,t.next=14;break;case 12:return t.next=14,l.createFolder("".concat(r));case 14:return t.abrupt("return",a);case 15:case"end":return t.stop()}}),t)})))()}}}},"5fb1":function(e,t,r){"use strict";r("7e6e")},"7e6e":function(e,t,r){},be00:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"dayspan"}},[r("ds-calendar-app",{ref:"app",attrs:{calendar:e.calendar,"read-only":e.readOnly},on:{change:e.saveState},scopedSlots:e._u([{key:"eventPopover",fn:function(t){return[r("ds-calendar-event-popover",e._b({attrs:{"read-only":e.readOnly},on:{finish:e.saveState}},"ds-calendar-event-popover",t,!1))]}},{key:"eventCreatePopover",fn:function(t){var a=t.placeholder,n=t.calendar;return[r("ds-calendar-event-create-popover",{attrs:{"calendar-event":a,calendar:n,close:e.$refs.app.$refs.calendar.clearPlaceholder},on:{"create-edit":e.$refs.app.editPlaceholder,"create-popover-closed":e.saveState}})]}},{key:"eventTimeTitle",fn:function(t){var a=t.calendarEvent,n=t.details;return[r("div",[n.icon?r("v-icon",{staticClass:"ds-ev-icon",style:{color:n.forecolor},attrs:{size:"14"}},[e._v(" "+e._s(n.icon)+" ")]):e._e(),r("strong",{staticClass:"ds-ev-title"},[e._v(e._s(n.title))])],1),r("div",{staticClass:"ds-ev-description"},[e._v(e._s(e.getCalendarTime(a)))])]}}])},[r("template",{slot:"title"},[e._v(" DaySpan ")]),r("template",{slot:"menuRight"},[r("v-btn",{attrs:{icon:"",large:""}},[e._v(" . ")])],1),r("template",{slot:"drawerBottom"},[r("div",{staticClass:"pa-3"},[r("v-checkbox",{attrs:{label:"Read Only?"},model:{value:e.readOnly,callback:function(t){e.readOnly=t},expression:"readOnly"}})],1)])],2)],1)},n=[],s=(r("4160"),r("159b"),r("96cf"),r("1da1")),o=r("4585"),c=r("00e8"),i=r.n(c),d=r("7fed"),u=r.n(d),l=r("9abd"),p=r("2b0e"),f=new u.a(i.a),v={name:"app",mixins:[o["a"]],created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:void 0!=e.$route.query.url&&(e.url=void 0!=e.$route.hash?e.$route.query.url+e.$route.hash:e.$route.query,e.update());case 1:case"end":return t.stop()}}),t)})))()},data:function(){return{storeKey:"dayspanState",calendar:l["a"].months(),readOnly:!1}},mounted:function(){window.app=this.$refs.app},methods:{update:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getGroupStorage(e.url);case 2:e.st=t.sent,void 0!=e.st&&e.loadState();case 4:case"end":return t.stop()}}),t)})))()},getCalendarTime:function(e){var t=e.start.format("a"),r=e.end.format("a"),a=e.start.format("h"),n=e.end.format("h");return 0!==e.start.minute&&(a+=e.start.format(":mm")),0!==e.end.minute&&(n+=e.end.format(":mm")),t===r?a+" - "+n+r:a+t+" - "+n+r},saveState:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.calendar.toInput(!0),a=JSON.stringify(r),void 0==e.st){t.next=11;break}return t.prev=3,t.next=6,f.createFile(e.st.url+"calendrier.json",a,"text/x-json");case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](3),alert("Désolé, Impossible d'enregitrer le calendrier à l'adresse "+e.st);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})))()},loadState:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},t.prev=1,t.next=4,f.readFile(e.st.url+"calendrier.json");case 4:a=t.sent,n=JSON.parse(a),n&&(r=n,r.preferToday=!1),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:r.events.forEach((function(t){var r=e.$dayspan.getDefaultEventDetails();t.data=p["default"].util.extend(r,t.data)})),e.$refs.app.setState(r);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})))()}}},m=v,h=(r("5fb1"),r("2877")),g=r("6544"),b=r.n(g),w=r("5530"),x=(r("df86"),r("7560")),y=r("58df"),k=Object(y["a"])(x["a"]).extend({name:"v-app",props:{dark:{type:Boolean,default:void 0},id:{type:String,default:"app"},light:{type:Boolean,default:void 0}},computed:{isDark:function(){return this.$vuetify.theme.dark}},beforeCreate:function(){if(!this.$vuetify||this.$vuetify===this.$root)throw new Error("Vuetify is not properly initialized, see https://vuetifyjs.com/getting-started/quick-start#bootstrapping-the-vuetify-object")},render:function(e){var t=e("div",{staticClass:"v-application--wrap"},this.$slots.default);return e("div",{staticClass:"v-application",class:Object(w["a"])({"v-application--is-rtl":this.$vuetify.rtl,"v-application--is-ltr":!this.$vuetify.rtl},this.themeClasses),attrs:{"data-app":!0},domProps:{id:this.id}},[t])}}),O=r("8336"),R=r("ac7c"),_=r("132d"),S=Object(h["a"])(m,a,n,!1,null,null,null);t["default"]=S.exports;b()(S,{VApp:k,VBtn:O["a"],VCheckbox:R["a"],VIcon:_["a"]})},df86:function(e,t,r){}}]);
//# sourceMappingURL=calendrier.af3601ca.js.map