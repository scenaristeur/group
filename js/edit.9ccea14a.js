(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["edit"],{1071:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("h3",[e._v(e._s(e.item.classe.name))]),e._l(e.item.classe.fields,(function(e){return a("b-input",{key:e.predicate,ref:e.predicate,refInFor:!0,attrs:{name:e.predicate,placeholder:e.label}})})),a("b-button",{on:{click:e.add}},[e._v("Cr√©er")])],2)},n=[],i=(a("4160"),a("caad"),a("b0c0"),a("07ac"),a("ac1f"),a("2532"),a("5319"),a("1276"),a("498a"),a("159b"),a("96cf"),a("1da1")),o=a("4360"),s=a("16b0"),c=a("4d8d"),u=a("6dc1"),l={store:o["a"],name:"Edit",mixins:[s["a"]],created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:void 0!=e.$route.query.item&&(e.item=e.$route.query.item,e.item.classe=e.CLASSES[e.item.block.type],console.log("CLASSE",e.item));case 1:case"end":return t.stop()}}),t)})))()},data:function(){return{item:{classe:{fields:[]}}}},methods:{add:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(console.log("add",e.$refs),e.item.thing={},a=0,r=Object.values(e.$refs);a<r.length;a++)n=r[a],i=n[0].$el,console.log(i.name,i.value),e.item.thing[i.name]=i.value;return console.log(e.item),e.item.thing.types=["http://purl.org/vocab/lifecycle/schema#Task","http://www.w3.org/ns/ldp#Resource",e.item.classe.name],e.item.thing.path=e.item.block.path,t.next=8,e.createFile(e.item.thing);case 8:o=t.sent,console.log(o),e.$router.back();case 11:case"end":return t.stop()}}),t)})))()},createFile:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log(e),e.label=e.label.trim(),e.ttl_name=e.label.replace(/\s/g,"_"),t.activity={actor:{name:t.webId},type:"Create",summary:"",object:{name:e.label,url:"",type:"Task"}},r={},void 0!=e.url){a.next=13;break}return e.url=e.path+e.ttl_name+".ttl",a.next=9,Object(c["a"])(e.url);case 9:r=a.sent,t.activity.type="Create",a.next=17;break;case 13:return a.next=15,Object(c["c"])(e.url);case 15:r=a.sent,t.activity.type="Update";case 17:return n=r.addSubject({identifier:"this"}),i=new Date,o=i.toISOString(),void 0!=e.created?(e.modified=o,n.addLiteral(u["a"].modified,o),n.removeAll(u["e"].label),n.removeAll(u["c"].inbox),n.removeAll(u["d"].type)):(e.created=o,n.addLiteral(u["a"].created,o),n.addLiteral(u["e"].label,e.label),n.addRef(u["c"].inbox,"./"+e.ttl_name+"/inbox/"),n.addRef(u["b"].maker,t.webId),e.types.forEach((function(e){n.addRef(u["d"].type,e)}))),e.types.includes("Action")?(t.activity.object.type="Task",n.addLiteral("https://vocab.org/lifecycle/schema#state",e.status)):e.types.includes("Tension")&&(t.activity.object.type="Tension",void 0!=e.created&&(n.removeAll("https://holacratie.solidcommunity.net/public/holacratie#whatis",e.wi),n.removeAll("https://holacratie.solidcommunity.net/public/holacratie#whatshouldbe",e.wsb),n.removeAll("http://www.w3.org/ns/org#memberOf"),n.removeAll("http://www.w3.org/ns/org#purpose")),n.addLiteral("https://holacratie.solidcommunity.net/public/holacratie#whatis",e.wi),n.addLiteral("https://holacratie.solidcommunity.net/public/holacratie#whatshouldbe",e.wsb),void 0!=e.roles&&(e.roles.split(",").forEach((function(e){n.addLiteral("http://www.w3.org/ns/org#memberOf",e.trim())})),console.log("TODO: must look at existing groups & existing frineds groups & activity published groups")),void 0!=e.domains&&(e.domains.split(",").forEach((function(e){n.addLiteral("http://www.w3.org/ns/org#purpose",e.trim())})),console.log("TODO: must look at https://www.wikidata.org/w/api.php?action=wbsearchentities&language=fr&format=json&search=Ecology"))),a.next=24,r.save();case 24:return console.log("data saved",e.label),console.log(t.activity),a.abrupt("return",e);case 27:case"end":return a.stop()}}),a)})))()}}},p=l,d=(a("d572"),a("2877")),f=Object(d["a"])(p,r,n,!1,null,null,null);t["default"]=f.exports},"11a8":function(e,t){function a(e){this.value=e}a.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},a.prototype.termType="NamedNode",e.exports=a},"16b0":function(e,t,a){"use strict";a("a15b"),a("baa5"),a("ac1f"),a("8a79"),a("5319"),a("498a"),a("96cf");var r=a("1da1"),n=a("00e8"),i=a.n(n),o=a("7fed"),s=a.n(o),c=window.solid,u=new s.a(i.a),l=a("9b92"),p=l.namedNode;t["a"]={created:function(){this.webId=this.$store.state.webId,this.storage=this.$store.state.storage},methods:{getStorage:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var r,n,i,o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.endsWith("#we")||e.endsWith("#this")?e:e+"#we",a.next=3,c.data[r].storage;case 3:if(n=a.sent,void 0!="".concat(n)){a.next=21;break}return i=t.url.substring(0,t.url.lastIndexOf("/")),a.next=8,c.data[r].vcard$fn;case 8:return o=a.sent,s="".concat(o).trim().replace(/\s/g,"_"),n=[i,s,""].join("/"),a.next=13,!u.itemExists(t.storage);case 13:if(!a.sent){a.next=18;break}return a.next=16,u.createFolder(t.storage);case 16:a.next=19;break;case 18:case 19:return a.next=21,c.data[r]["http://www.w3.org/ns/pim/space#storage"].set(p(n));case 21:return a.abrupt("return","".concat(n));case 22:case"end":return a.stop()}}),a)})))()}},computed:{webId:{get:function(){return this.$store.state.webId},set:function(){}},storage:{get:function(){return this.$store.state.storage},set:function(){}}}}},"3cf1":function(e,t,a){var r=a("47b7"),n=a("d76c"),i=a("5afa"),o=a("11a8"),s=a("e1cc"),c=a("a55c");function u(){}u.namedNode=function(e){return new o(e)},u.blankNode=function(e){return new r(e)},u.literal=function(e,t){return"string"===typeof t?-1===t.indexOf(":")?new i(e,t):new i(e,null,u.namedNode(t)):new i(e,null,t)},u.defaultGraph=function(){return u.defaultGraphInstance},u.variable=function(e){return new c(e)},u.triple=function(e,t,a){return u.quad(e,t,a)},u.quad=function(e,t,a,r){return new s(e,t,a,r||u.defaultGraphInstance)},u.defaultGraphInstance=new n,e.exports=u},"47b7":function(e,t){function a(e){this.value=e||"b"+ ++a.nextId}a.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},a.prototype.termType="BlankNode",a.nextId=0,e.exports=a},"5afa":function(e,t,a){var r=a("11a8");function n(e,t,a){this.value=e,this.datatype=n.stringDatatype,this.language="",t?(this.language=t,this.datatype=n.langStringDatatype):a&&(this.datatype=a)}n.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)},n.prototype.termType="Literal",n.langStringDatatype=new r("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),n.stringDatatype=new r("http://www.w3.org/2001/XMLSchema#string"),e.exports=n},"9b92":function(e,t,a){var r=a("3cf1");e.exports=r},a55c:function(e,t){function a(e){this.value=e}a.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},a.prototype.termType="Variable",e.exports=a},baa5:function(e,t,a){var r=a("23e7"),n=a("e58c");r({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},d572:function(e,t,a){"use strict";a("fea3")},d76c:function(e,t){function a(){this.value=""}a.prototype.equals=function(e){return!!e&&e.termType===this.termType},a.prototype.termType="DefaultGraph",e.exports=a},e1cc:function(e,t,a){var r=a("d76c");function n(e,t,a,n){this.subject=e,this.predicate=t,this.object=a,this.graph=n||new r}n.prototype.equals=function(e){return!!e&&("Quad"===e.termType||!e.termType)&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)},n.prototype.termType="Quad",n.prototype.value="",e.exports=n},e58c:function(e,t,a){"use strict";var r=a("fc6a"),n=a("a691"),i=a("50c4"),o=a("a640"),s=a("ae40"),c=Math.min,u=[].lastIndexOf,l=!!u&&1/[1].lastIndexOf(1,-0)<0,p=o("lastIndexOf"),d=s("indexOf",{ACCESSORS:!0,1:0}),f=l||!p||!d;e.exports=f?function(e){if(l)return u.apply(this,arguments)||0;var t=r(this),a=i(t.length),o=a-1;for(arguments.length>1&&(o=c(o,n(arguments[1]))),o<0&&(o=a+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:u},fea3:function(e,t,a){}}]);
//# sourceMappingURL=edit.9ccea14a.js.map