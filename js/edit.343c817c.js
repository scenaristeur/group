(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["edit"],{"07ac":function(e,t,r){var n=r("23e7"),a=r("6f53").values;n({target:"Object",stat:!0},{values:function(e){return a(e)}})},1071:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h3",[e._v(e._s(e.item.classe.name))]),e._l(e.item.classe.fields,(function(e){return r("b-input",{key:e.predicate,ref:e.predicate,refInFor:!0,attrs:{name:e.predicate,placeholder:e.label}})})),r("b-button",{on:{click:e.add}},[e._v("Créer")])],2)},a=[],i=(r("4160"),r("caad"),r("b0c0"),r("07ac"),r("ac1f"),r("2532"),r("5319"),r("1276"),r("498a"),r("159b"),r("96cf"),r("1da1")),o=r("4360"),c=r("16b0"),s=r("4d8d"),l=r("6dc1"),u={store:o["a"],name:"Edit",mixins:[c["a"]],created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:void 0!=e.$route.query.item&&(e.item=e.$route.query.item,e.item.classe=e.CLASSES[e.item.block.type],console.log("CLASSE",e.item));case 1:case"end":return t.stop()}}),t)})))()},data:function(){return{item:{classe:{fields:[]}}}},methods:{add:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(console.log("add",e.$refs),e.item.thing={},r=0,n=Object.values(e.$refs);r<n.length;r++)a=n[r],i=a[0].$el,console.log(i.name,i.value),e.item.thing[i.name]=i.value;return console.log(e.item),e.item.thing.types=["http://purl.org/vocab/lifecycle/schema#Task","http://www.w3.org/ns/ldp#Resource",e.item.classe.name],e.item.thing.path=e.item.block.path,t.next=8,e.createFile(e.item.thing);case 8:o=t.sent,console.log(o),e.$router.back();case 11:case"end":return t.stop()}}),t)})))()},createFile:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log(e),e.label=e.label.trim(),e.ttl_name=e.label.replace(/\s/g,"_"),t.activity={actor:{name:t.webId},type:"Create",summary:"",object:{name:e.label,url:"",type:"Task"}},n={},void 0!=e.url){r.next=13;break}return e.url=e.path+e.ttl_name+".ttl",r.next=9,Object(s["a"])(e.url);case 9:n=r.sent,t.activity.type="Create",r.next=17;break;case 13:return r.next=15,Object(s["c"])(e.url);case 15:n=r.sent,t.activity.type="Update";case 17:return a=n.addSubject({identifier:"this"}),i=new Date,o=i.toISOString(),void 0!=e.created?(e.modified=o,a.addLiteral(l["a"].modified,o),a.removeAll(l["e"].label),a.removeAll(l["c"].inbox),a.removeAll(l["d"].type)):(e.created=o,a.addLiteral(l["a"].created,o),a.addLiteral(l["e"].label,e.label),a.addRef(l["c"].inbox,"./"+e.ttl_name+"/inbox/"),a.addRef(l["b"].maker,t.webId),e.types.forEach((function(e){a.addRef(l["d"].type,e)}))),e.types.includes("Action")?(t.activity.object.type="Task",a.addLiteral("https://vocab.org/lifecycle/schema#state",e.status)):e.types.includes("Tension")&&(t.activity.object.type="Tension",void 0!=e.created&&(a.removeAll("https://holacratie.solidcommunity.net/public/holacratie#whatis",e.wi),a.removeAll("https://holacratie.solidcommunity.net/public/holacratie#whatshouldbe",e.wsb),a.removeAll("http://www.w3.org/ns/org#memberOf"),a.removeAll("http://www.w3.org/ns/org#purpose")),a.addLiteral("https://holacratie.solidcommunity.net/public/holacratie#whatis",e.wi),a.addLiteral("https://holacratie.solidcommunity.net/public/holacratie#whatshouldbe",e.wsb),void 0!=e.roles&&(e.roles.split(",").forEach((function(e){a.addLiteral("http://www.w3.org/ns/org#memberOf",e.trim())})),console.log("TODO: must look at existing groups & existing frineds groups & activity published groups")),void 0!=e.domains&&(e.domains.split(",").forEach((function(e){a.addLiteral("http://www.w3.org/ns/org#purpose",e.trim())})),console.log("TODO: must look at https://www.wikidata.org/w/api.php?action=wbsearchentities&language=fr&format=json&search=Ecology"))),r.next=24,n.save();case 24:return console.log("data saved",e.label),console.log(t.activity),r.abrupt("return",e);case 27:case"end":return r.stop()}}),r)})))()}}},d=u,f=(r("d572"),r("2877")),h=Object(f["a"])(d,n,a,!1,null,null,null);t["default"]=h.exports},1276:function(e,t,r){"use strict";var n=r("d784"),a=r("44e7"),i=r("825a"),o=r("1d80"),c=r("4840"),s=r("8aa5"),l=r("50c4"),u=r("14c3"),d=r("9263"),f=r("d039"),h=[].push,g=Math.min,p=4294967295,v=!f((function(){return!RegExp(p,"y")}));n("split",2,(function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var n=String(o(this)),i=void 0===r?p:r>>>0;if(0===i)return[];if(void 0===e)return[n];if(!a(e))return t.call(n,e,i);var c,s,l,u=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,v=new RegExp(e.source,f+"g");while(c=d.call(v,n)){if(s=v.lastIndex,s>g&&(u.push(n.slice(g,c.index)),c.length>1&&c.index<n.length&&h.apply(u,c.slice(1)),l=c[0].length,g=s,u.length>=i))break;v.lastIndex===c.index&&v.lastIndex++}return g===n.length?!l&&v.test("")||u.push(""):u.push(n.slice(g)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var a=o(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,a,r):n.call(String(a),t,r)},function(e,a){var o=r(n,e,this,a,n!==t);if(o.done)return o.value;var d=i(e),f=String(this),h=c(d,RegExp),m=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),w=new h(v?d:"^(?:"+d.source+")",b),x=void 0===a?p:a>>>0;if(0===x)return[];if(0===f.length)return null===u(w,f)?[f]:[];var y=0,S=0,k=[];while(S<f.length){w.lastIndex=v?S:0;var E,O=u(w,v?f:f.slice(S));if(null===O||(E=g(l(w.lastIndex+(v?0:S)),f.length))===y)S=s(f,S,m);else{if(k.push(f.slice(y,S)),k.length===x)return k;for(var R=1;R<=O.length-1;R++)if(k.push(O[R]),k.length===x)return k;S=y=E}}return k.push(f.slice(y)),k}]}),!v)},"16b0":function(e,t,r){"use strict";r("a15b"),r("baa5"),r("ac1f"),r("8a79"),r("5319"),r("498a"),r("96cf");var n=r("1da1"),a=r("00e8"),i=r.n(a),o=r("7fed"),c=r.n(o),s=window.solid,l=new c.a(i.a),u=r("9b92"),d=u.namedNode;t["a"]={created:function(){this.webId=this.$store.state.webId,this.storage=this.$store.state.storage},methods:{getStorage:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.endsWith("#we")||e.endsWith("#this")?e:e+"#we",r.next=3,s.data[n].storage;case 3:if(a=r.sent,void 0!="".concat(a)){r.next=21;break}return i=t.url.substring(0,t.url.lastIndexOf("/")),r.next=8,s.data[n].vcard$fn;case 8:return o=r.sent,c="".concat(o).trim().replace(/\s/g,"_"),a=[i,c,""].join("/"),r.next=13,!l.itemExists(t.storage);case 13:if(!r.sent){r.next=18;break}return r.next=16,l.createFolder(t.storage);case 16:r.next=19;break;case 18:case 19:return r.next=21,s.data[n]["http://www.w3.org/ns/pim/space#storage"].set(d(a));case 21:return r.abrupt("return","".concat(a));case 22:case"end":return r.stop()}}),r)})))()}},computed:{webId:{get:function(){return this.$store.state.webId},set:function(){}},storage:{get:function(){return this.$store.state.storage},set:function(){}}}}},2532:function(e,t,r){"use strict";var n=r("23e7"),a=r("5a34"),i=r("1d80"),o=r("ab13");n({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~String(i(this)).indexOf(a(e),arguments.length>1?arguments[1]:void 0)}})},"498a":function(e,t,r){"use strict";var n=r("23e7"),a=r("58a8").trim,i=r("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return a(this)}})},5319:function(e,t,r){"use strict";var n=r("d784"),a=r("825a"),i=r("7b0b"),o=r("50c4"),c=r("a691"),s=r("1d80"),l=r("8aa5"),u=r("14c3"),d=Math.max,f=Math.min,h=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,v=function(e){return void 0===e?e:String(e)};n("replace",2,(function(e,t,r,n){var m=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=n.REPLACE_KEEPS_$0,w=m?"$":"$0";return[function(r,n){var a=s(this),i=void 0==r?void 0:r[e];return void 0!==i?i.call(r,a,n):t.call(String(a),r,n)},function(e,n){if(!m&&b||"string"===typeof n&&-1===n.indexOf(w)){var i=r(t,e,this,n);if(i.done)return i.value}var s=a(e),h=String(this),g="function"===typeof n;g||(n=String(n));var p=s.global;if(p){var y=s.unicode;s.lastIndex=0}var S=[];while(1){var k=u(s,h);if(null===k)break;if(S.push(k),!p)break;var E=String(k[0]);""===E&&(s.lastIndex=l(h,o(s.lastIndex),y))}for(var O="",R=0,$=0;$<S.length;$++){k=S[$];for(var j=String(k[0]),A=d(f(c(k.index),h.length),0),I=[],_=1;_<k.length;_++)I.push(v(k[_]));var C=k.groups;if(g){var L=[j].concat(I,A,h);void 0!==C&&L.push(C);var T=String(n.apply(void 0,L))}else T=x(j,h,A,I,C,n);A>=R&&(O+=h.slice(R,A)+T,R=A+j.length)}return O+h.slice(R)}];function x(e,r,n,a,o,c){var s=n+e.length,l=a.length,u=p;return void 0!==o&&(o=i(o),u=g),t.call(c,u,(function(t,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,n);case"'":return r.slice(s);case"<":c=o[i.slice(1,-1)];break;default:var u=+i;if(0===u)return t;if(u>l){var d=h(u/10);return 0===d?t:d<=l?void 0===a[d-1]?i.charAt(1):a[d-1]+i.charAt(1):t}c=a[u-1]}return void 0===c?"":c}))}}))},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),a=r("5899"),i="["+a+"]",o=RegExp("^"+i+i+"*"),c=RegExp(i+i+"*$"),s=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(o,"")),2&e&&(r=r.replace(c,"")),r}};e.exports={start:s(1),end:s(2),trim:s(3)}},"6f53":function(e,t,r){var n=r("83ab"),a=r("df75"),i=r("fc6a"),o=r("d1e7").f,c=function(e){return function(t){var r,c=i(t),s=a(c),l=s.length,u=0,d=[];while(l>u)r=s[u++],n&&!o.call(c,r)||d.push(e?[r,c[r]]:c[r]);return d}};e.exports={entries:c(!0),values:c(!1)}},"8a79":function(e,t,r){"use strict";var n=r("23e7"),a=r("06cf").f,i=r("50c4"),o=r("5a34"),c=r("1d80"),s=r("ab13"),l=r("c430"),u="".endsWith,d=Math.min,f=s("endsWith"),h=!l&&!f&&!!function(){var e=a(String.prototype,"endsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!h&&!f},{endsWith:function(e){var t=String(c(this));o(e);var r=arguments.length>1?arguments[1]:void 0,n=i(t.length),a=void 0===r?n:d(i(r),n),s=String(e);return u?u.call(t,s,a):t.slice(a-s.length,a)===s}})},a15b:function(e,t,r){"use strict";var n=r("23e7"),a=r("44ad"),i=r("fc6a"),o=r("a640"),c=[].join,s=a!=Object,l=o("join",",");n({target:"Array",proto:!0,forced:s||!l},{join:function(e){return c.call(i(this),void 0===e?",":e)}})},b0c0:function(e,t,r){var n=r("83ab"),a=r("9bf2").f,i=Function.prototype,o=i.toString,c=/^\s*function ([^ (]*)/,s="name";n&&!(s in i)&&a(i,s,{configurable:!0,get:function(){try{return o.call(this).match(c)[1]}catch(e){return""}}})},c8d2:function(e,t,r){var n=r("d039"),a=r("5899"),i="​᠎";e.exports=function(e){return n((function(){return!!a[e]()||i[e]()!=i||a[e].name!==e}))}},caad:function(e,t,r){"use strict";var n=r("23e7"),a=r("4d64").includes,i=r("44d2"),o=r("ae40"),c=o("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!c},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},d572:function(e,t,r){"use strict";r("fea3")},fea3:function(e,t,r){}}]);
//# sourceMappingURL=edit.343c817c.js.map